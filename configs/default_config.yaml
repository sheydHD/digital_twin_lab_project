# Bayesian Model Selection for Beam Theory in Digital Twins
# Default Configuration File

# Beam geometry parameters
beam_parameters:
  length: 1.0  # Beam length [m]
  width: 0.1   # Beam width [m]
  # Aspect ratios (L/h) to study - ranging from thick to slender beams
  aspect_ratios:
    - 5    # Very thick beam - Timoshenko expected
    - 8    # Thick beam
    - 10   # Moderate
    - 12   # Transition region expected
    - 15   # Transition region
    - 19   # Moderately thick beam
    - 20   # Moderately slender
    - 30   # Slender beam - EB expected
    - 50   # Very slender beam
    - 60   # Extremely slender beam - EB should dominate

# Material properties (Structural Steel)
material:
  elastic_modulus: 2.1e+11   # Young's modulus E [Pa] = 210 GPa
  poisson_ratio: 0.3         # Poisson's ratio ν [-]
  density: 7850              # Density ρ [kg/m³]
  shear_correction_factor: 0.8333  # κ = 5/6 for rectangular section

# Load configuration
load:
  point_load: 1000.0      # Point load at tip [N]
  distributed_load: 0.0   # Distributed load [N/m]
  moment: 0.0             # Applied moment at tip [N·m]

# Synthetic data generation settings
data_generation:
  n_displacement_sensors: 5   # Number of displacement measurement points
  n_strain_gauges: 4          # Number of strain gauge locations
  displacement_noise: 1.0e-6  # Displacement noise std [m] (absolute)
  strain_noise: 1.0e-6        # Strain noise std [-] (absolute)
  relative_noise: true        # Use relative noise instead of absolute
  noise_fraction: 0.0005      # 0.05% relative noise (lowered to improve model discrimination)
  seed: 42                    # Random seed for reproducibility

# FEM settings for high-fidelity reference
fem:
  n_elements_x: 40   # Elements along beam length
  n_elements_y: 8    # Elements through beam height
  element_type: "Q4" # 4-node quadrilateral elements

# Bayesian inference settings
bayesian:
  n_samples: 1500     # MCMC samples per chain (increased for stability)
  n_tune: 800         # Tuning/warmup samples (increased for better adaptation)
  n_chains: 4         # Number of chains (increased for reliable R-hat)
  target_accept: 0.95 # Target acceptance rate for NUTS
  random_seed: 42     # Random seed for reproducibility
  
  # Data normalization settings
  # Normalizes quantities to O(1) for numerical stability
  normalization:
    enabled: true           # Enable data normalization for stable MCMC
    method: "max_abs"       # Method: "max_abs", "std", or "range"
  
  # Evidence estimation method
  # Bridge sampling (Meng & Wong, 1996) is used exclusively.
  # It computes the true marginal likelihood p(y|M) for Bayes factor computation.
  # WAIC is computed for diagnostics only.
  evidence_method: "bridge_sampling"

# Convergence diagnostics settings
# These thresholds determine when MCMC results are acceptable
convergence:
  # R-hat thresholds (Gelman-Rubin statistic)
  r_hat_reject: 1.05        # Hard reject: chains definitely not mixed
  r_hat_warn: 1.01          # Warning: marginal convergence
  
  # Effective sample size thresholds
  ess_bulk_min: 400         # Minimum bulk ESS for reliable estimates
  ess_tail_min: 200         # Minimum tail ESS for quantiles
  
  # Retry behavior for failed convergence
  retry_on_failure: true    # Auto-retry with more samples
  max_retries: 2            # Maximum retry attempts
  samples_multiplier: 1.5   # Multiply samples on each retry

# Prior distributions for calibration
# NOTE: Carefully tuned for balanced Occam's razor penalty
priors:
  elastic_modulus:
    distribution: lognormal
    # Log-normal prior centered at 210 GPa with ~5% uncertainty
    mu: 26.07  # ln(210e9) ≈ 26.07
    sigma: 0.05
  poisson_ratio:
    distribution: normal
    mu: 0.3
    sigma: 0.05  # Widened from 0.03 to reduce Occam asymmetry
  observation_noise:
    distribution: halfnormal
    sigma: 1.0e-6

# Model selection thresholds (following Kass & Raftery, 1995)
model_selection:
  # Bayes factor interpretation thresholds
  weak_evidence: 3      # BF > 3: Weak evidence
  moderate_evidence: 10 # BF > 10: Moderate evidence
  strong_evidence: 100  # BF > 100: Strong evidence
  # Threshold below which results are considered inconclusive
  # This handles edge cases (e.g., L/h=50) where models are nearly equivalent
  inconclusive_threshold: 0.5  # |log BF| < 0.5 is inconclusive

# Hyperparameter optimization settings (Optuna)
optimization:
  enabled: false         # Set to true to run optimization
  n_trials: 30           # Number of optimization trials
  timeout: 3600          # Maximum optimization time (seconds)
  fast_mode: true        # Use subset of datasets for faster optimization

# Frequency analysis settings
frequency_analysis:
  enabled: true          # Enable frequency-based model selection analysis
  n_modes: 5             # Number of vibration modes to analyze

# Output settings
output_dir: "outputs"
save_traces: true
save_figures: true
figure_format: "png"
figure_dpi: 150

# Logging
logging:
  level: "INFO"
  file: "outputs/logs/pipeline.log"
